<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Welcome to ;;Trace</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #F9FAFB; /* Light Gray */
            color: #111827; /* Dark Gray */
        }
        .laptop-screen {
            background-color: #F9FAFB;
            background-image: radial-gradient(circle, rgba(0, 0, 0, 0.05) 1px, transparent 1px);
            background-size: 25px 25px;
            padding: 1rem;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        /* Animation Styles */
        .palette-item { 
            transition: opacity 0.3s ease-in-out, max-height 0.3s ease-in-out, transform 0.3s ease-in-out, background-color 0.2s ease;
            max-height: 100px;
            opacity: 1;
            transform: scaleY(1);
            transform-origin: top;
            overflow: hidden;
        }
        .palette-item.hidden {
            opacity: 0;
            max-height: 0;
            transform: scaleY(0);
        }
        .palette-item.selected { 
            background-color: rgba(59, 130, 246, 0.1); /* Lighter blue highlight */
        }
        .blinking-cursor {
            display: inline-block;
            width: 2px;
            height: 1em;
            background-color: #6D28D9;
            animation: blink 1s step-end infinite;
            vertical-align: text-bottom;
            margin-left: 2px;
        }
        @keyframes blink {
            from, to { opacity: 1 }
            50% { opacity: 0 }
        }
    </style>
</head>
<body class="antialiased">

    <main class="min-h-screen w-full flex items-center justify-center p-4 md:p-8">
        <div class="max-w-5xl w-full">
            <div class="text-center">
                <h1 class="text-4xl md:text-5xl font-bold text-gray-900 tracking-tight">Welcome to Trace.</h1>
                <p class="mt-3 text-lg text-gray-600">Your reflexive memory engine is now active.</p>
            </div>

            <div class="mt-12 md:mt-16 grid md:grid-cols-2 gap-x-16 gap-y-12 items-center">
                <div class="md:order-2">
                    <h2 class="text-2xl font-semibold text-gray-900 mb-6">How It Works</h2>
                    <ol class="space-y-6">
                        <li class="flex">
                             <div class="flex-shrink-0 w-8 h-8 flex items-center justify-center bg-gray-900 text-white rounded-full font-bold text-sm mr-4 mt-1">1</div>
                             <div>
                                <h3 class="font-semibold text-gray-900">Mark & Stash</h3>
                                <p class="text-gray-600">Select text and press <kbd class="px-2 py-1 text-xs font-semibold text-gray-800 bg-gray-100 border border-gray-200 rounded-lg">Enter</kbd> to save it.</p>
                             </div>
                        </li>
                         <li class="flex">
                             <div class="flex-shrink-0 w-8 h-8 flex items-center justify-center bg-gray-900 text-white rounded-full font-bold text-sm mr-4 mt-1">2</div>
                             <div>
                                <h3 class="font-semibold text-gray-900">Recall Instantly</h3>
                                <p class="text-gray-600">In any text field, type <code class="bg-gray-100 text-gray-800 rounded-md px-2 py-1 font-mono text-sm">;;</code> to search and paste from your memory.</p>
                             </div>
                        </li>
                         <li class="flex">
                            <div class="flex-shrink-0 w-8 h-8 flex items-center justify-center bg-gray-900 text-white rounded-full font-bold text-sm mr-4 mt-1">3</div>
                             <div>
                                <h3 class="font-semibold text-gray-900">Manage</h3>
                                <p class="text-gray-600">Press <kbd class="px-2 py-1 text-xs font-semibold text-gray-800 bg-gray-100 border border-gray-200 rounded-lg">Ctrl+Shift+X</kbd> to open the main view. Navigate with arrow keys, press <kbd class="px-2 py-1 text-xs font-semibold text-gray-800 bg-gray-100 border border-gray-200 rounded-lg">Enter</kbd> to copy, or <kbd class="px-2 py-1 text-xs font-semibold text-gray-800 bg-gray-100 border border-gray-200 rounded-lg">Shift+Enter</kbd> to view inside a stash.</p>
                             </div>
                        </li>
                    </ol>
                     <div class="mt-8">
                        <a href="https://theprismlabs.github.io/trace/" target="_blank" class="text-blue-600 font-medium hover:underline">Learn more</a>
                        <span class="mx-2 text-gray-400">&bull;</span>
                        <a href="https://theprismlabs.github.io/trace/privacy-policy" target="_blank" class="text-blue-600 font-medium hover:underline">Privacy Policy</a>
                    </div>
                </div>
                <div class="md:order-1">
                    <!-- Laptop Frame -->
                    <div class="relative mx-auto border-gray-300 bg-gray-300 border-[8px] rounded-t-xl h-[172px] max-w-[301px] md:h-[294px] md:max-w-[512px]">
                        <div class="rounded-lg overflow-hidden h-[156px] md:h-[278px] laptop-screen">
                             <div id="animation-container" class="w-full h-full">
                                <!-- JS will populate this -->
                             </div>
                        </div>
                    </div>
                    <div class="relative mx-auto bg-gray-200 rounded-b-xl h-[17px] max-w-[351px] md:h-[21px] md:max-w-[597px]">
                        <div class="absolute left-1/2 top-0 -translate-x-1/2 rounded-b-xl w-[56px] h-[4px] md:w-[96px] md:h-[8px] bg-gray-300"></div>
                    </div>
                </div>
            </div>
             <div class="mt-16 text-center text-sm text-gray-500">
                <p>First, pin the extension for easy access. Click the puzzle piece in your toolbar ( <svg xmlns="http://www.w3.org/2000/svg" class="inline-block h-4 w-4" viewBox="0 0 20 20" fill="currentColor"><path d="M10 3.5A1.5 1.5 0 0111.5 2h3.879a1.5 1.5 0 011.06.44l3.122 3.12A1.5 1.5 0 0120 6.622V16.5a1.5 1.5 0 01-1.5 1.5h-17A1.5 1.5 0 010 16.5v-13A1.5 1.5 0 011.5 2H6a1.5 1.5 0 011.5 1.5v1.5H10V3.5zM9 11v4h2v-4H9z"></path></svg> ) and then the pin icon next to Trace.</p>
            </div>
        </div>
    </main>

    <script>
        // Command Palette Animation Logic
        document.addEventListener('DOMContentLoaded', () => {
            const container = document.getElementById('animation-container');
            const typingTarget = 'Product Philosop';

            const allItems = [
                { match: "Interesting Reads", html: `<div class="p-2.5 flex items-center space-x-2.5"><div class="w-4 h-4 flex-shrink-0 text-red-500"><!-- icon --></div><div><p class="text-gray-800">Interesting Reads</p><p class="text-gray-500 text-xs">1 item • Stash</p></div></div>` },
                { match: "Quotes", html: `<div class="p-2.5 flex items-center space-x-2.5"><div class="w-4 h-4 flex-shrink-0 text-orange-500"><!-- icon --></div><div><p class="text-gray-800">Quotes</p><p class="text-gray-500 text-xs">4 items • Stash</p></div></div>` },
                { match: "Product Philosophy", html: `<div class="p-2.5 flex items-center space-x-2.5"><div class="w-4 h-4 flex-shrink-0 text-amber-500"><!-- icon --></div><div><p class="text-gray-800">Product Philosophy</p><p class="text-gray-500 text-xs">3 items • Stash</p></div></div>` },
                { match: "obviousness", content: 'Trace isn’t about features. It’s about obviousness. It behaves the way your mind expects. — <a href="/" class="text-gray-400 hover:text-blue-600 underline">Trace: The Reflexive Memory Engine</a>', stash: "Product Philosophy", html: `<div class="p-2.5 flex items-start space-x-2.5"><div class="w-4 h-4 flex-shrink-0 text-gray-400 mt-0.5"><!-- icon --></div><div><p class="text-gray-600">Trace isn't about features. It's about <span class="font-bold text-gray-800">obviousness</span>...</p><div class="flex items-center text-xs text-amber-600 mt-1"><span>Product Philosophy</span></div></div></div>`},
                { match: "user expects", content: "If a user expects something—Esc to dismiss, arrow keys to navigate, Enter to commit—it should already work.", stash: "Product Philosophy", html: `<div class="p-2.5 flex items-start space-x-2.5"><div class="w-4 h-4 flex-shrink-0 text-gray-400 mt-0.5"><!-- icon --></div><div><p class="text-gray-600">If a <span class="font-bold text-gray-800">user expects</span> something—Esc to dismiss...</p><div class="flex items-center text-xs text-amber-600 mt-1"><span>Product Philosophy</span></div></div></div>` },
            ];

            function renderItems(itemsToRender, selector) {
                const paletteContainer = container.querySelector(selector);
                if (paletteContainer) {
                    paletteContainer.innerHTML = itemsToRender.map((item, index) => 
                        `<div id="item-${index}" class="palette-item" data-match="${item.match}" data-stash="${item.stash || ''}">${item.html}</div>`
                    ).join('');
                }
            }

            async function runAnimation() {
                // 1. Reset and Initial State
                container.innerHTML = `
                    <div id="palette-wrapper" class="w-full max-w-sm transition-opacity duration-300">
                        <div id="query-container" class="w-full font-mono text-lg text-gray-800 mb-2">
                           <span class="text-gray-500">;;</span><span id="typing-span"></span><span class="blinking-cursor"></span>
                        </div>
                        <div id="palette-container" class="w-full bg-white rounded-lg shadow-2xl border border-gray-200 font-sans text-sm overflow-hidden divide-y divide-gray-200">
                        </div>
                    </div>
                `;
                renderItems(allItems, '#palette-container');
                
                const typingSpan = document.getElementById('typing-span');
                const paletteItems = Array.from(container.querySelectorAll('.palette-item'));

                // Pause to showcase the initial palette
                await new Promise(r => setTimeout(r, 1500));

                // 2. Animate Typing and Filtering
                for (let i = 0; i <= typingTarget.length; i++) {
                    await new Promise(r => setTimeout(r, 90));
                    const currentText = typingTarget.substring(0, i);
                    typingSpan.textContent = currentText;

                    paletteItems.forEach(item => {
                        const matchText = (item.dataset.match || "").toLowerCase();
                        const stashText = (item.dataset.stash || "").toLowerCase();
                        const isMatch = matchText.includes(currentText.toLowerCase()) || stashText.includes(currentText.toLowerCase());
                        if (!isMatch) {
                            item.classList.add('hidden');
                        } else {
                            item.classList.remove('hidden');
                        }
                    });
                }
                
                await new Promise(r => setTimeout(r, 700));

                // 3. Navigate
                const visibleItems = paletteItems.filter(item => !item.classList.contains('hidden'));
                const stashHeader = visibleItems.find(item => item.id === 'item-2');
                const clipToSelect = visibleItems.find(item => item.id === 'item-3'); // The 'obviousness' clip
                
                if (stashHeader) {
                    await new Promise(r => setTimeout(r, 800));
                    stashHeader.classList.add('selected');
                }
                if (clipToSelect) {
                    await new Promise(r => setTimeout(r, 800));
                    if (stashHeader) stashHeader.classList.remove('selected');
                    clipToSelect.classList.add('selected');
                }

                // 4. Paste
                await new Promise(r => setTimeout(r, 1200));
                const queryContainer = document.getElementById('query-container');
                const paletteContainer = document.getElementById('palette-container');
                
                if(paletteContainer) {
                    paletteContainer.style.transition = 'opacity 0.3s ease';
                    paletteContainer.style.opacity = 0;
                }
               
                await new Promise(r => setTimeout(r, 300));
                
                if (queryContainer) {
                    queryContainer.className = 'w-full text-lg text-gray-800 font-sans';
                    queryContainer.innerHTML = `<p>${allItems[3].content}<span class="blinking-cursor"></span></p>`;
                }
                 if (paletteContainer) paletteContainer.remove();
                
                // 5. Loop
                await new Promise(r => setTimeout(r, 5000));
                runAnimation();
            }

            runAnimation();
        });

    </script>
</body>
</html>
